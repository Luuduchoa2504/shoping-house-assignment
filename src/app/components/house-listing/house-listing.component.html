<div class="container">
  <div class="header-container">
    <div class="filter-container">
      <app-filter class="filter-component"></app-filter>
      @if (isLoggedIn) {
        <button class="btn btn-primary" (click)="createHouse()">Create new house</button>
      }
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div *ngIf="isLoading" class="loading">Loading...</div>
    <div *ngIf="errorModel || errorHouse" class="error">
      Error: {{ (errorModel || errorHouse) | json }}
    </div>

    <!-- Model List -->
    <div class="model-list">
      <div *ngFor="let model of houseModels"
           class="model-item"
           [class.active]="selectedModel?.id === model.id"
           (click)="selectModel(model)">

        <!-- Model Header -->
        <div class="model-header">
          <span>{{ model.model }} house type</span>
        </div>

        <!-- Expanded Content -->
        @if (selectedModel?.id === model.id && showDetails) {
          <div class="expanded-content">
            <!-- Media Section -->
            <div class="media-container">
              <div class="text-content">
                <h2>{{ selectedModel?.media?.title || 'No Title' }}</h2>
                <p>{{ selectedModel?.media?.description || 'No Description' }}</p>
              </div>
              <div class="image-content">
                <img [src]="selectedModel?.media?.banner"
                     alt="Model Banner"
                     *ngIf="selectedModel?.media?.banner" />
              </div>
            </div>

            <!-- House Table -->
            <div class="house-table">
              <table *ngIf="houses?.length; else noHouses">
                <thead>
                <tr>
                  <th>House Number</th>
                  <th>Block No</th>
                  <th>Land No</th>
                  <th>Price</th>
                  <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let house of houses">
                  <td>{{ house.houseNumber }}</td>
                  <td>{{ house.blockNumber }}</td>
                  <td>{{ house.landNumber }}</td>
                  <td>{{ house.price | number }}</td>
                  <td>
                    @if (isLoggedIn) {
                      <button class="btn btn-primary" (click)="editHouse(house)">Edit</button>
                    }
                  </td>
                </tr>
                </tbody>
              </table>
              <ng-template #noHouses>
                <p class="no-houses">No houses available for this model.</p>
              </ng-template>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>
